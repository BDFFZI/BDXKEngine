# 包管理器

## 提供功能

- 各自功能模块

## 实现目的
模块化设计，简化代码耦合性，提高功能复用能力。为项目发展提供更长的生命力和更宽的适用性。

## 使用说明
- 所有使用该包管理器的项目必须将该目录添加到附加包含目录里。
- 目录下每个文件夹都代表一个功能模块，文件夹内配备ReadMe文件，内有对应模块的简单介绍。

## 设计思路

### 包管理[^1]

引擎是一个很复杂的软件，可能用到多种功能，比如序列化，渲染，物理等等，这些功能之间往往没有直接联系，而且不同的引擎使用的功能也略有区别，直接放在一起会导致产生没必要的耦合，所以要想办法将他们分离。  
观察其他商业引擎，可以发现大多是使用专门的包管理器管理代码，甚至引擎的基本功能也是有多个内置包组成。

#### 分包存储代码

目前起步阶段直接创建一个包管理器的成本太大，所以我们选择先用一些简单的类似管理手段。  
分离源代码，将不同的功能块放在不同的文件夹中，文件夹内应配备说明文件并提供依赖相关的信息，接着用户手动在IDE内通过添加外部项的方式将相关源代码集合编译。

#### 组合构建引擎

引擎也是上述包的使用者，不同的引擎需求不同，渲染引擎注重渲染，物理引擎注重物理模拟，但可能都要用到序列化，空间变换等功能，存在相同功能又略有差异，所以采用组合功能的方式是最佳实现手段。  
引擎是最终产物，一个可编译项目，它通过上述包管理模式引入功能块，并稍加代码进行调用。

### 层次化[^2]

不同模块间会存在依赖关系，有些模块会频繁被其他模块引用，比如数学，序列化等底层功能。在依赖关系上要确保单项依赖，这样项目结构便可以呈现出一种强可读性的树状层次结构。

### 模块化[^3]

接着我们要减少树结构中的粗细和分叉，遵循设计模式中的单一职责原则和最少知道原则，以高内聚低耦合的原则编写代码。

## 编码规范

### 优先标准库实现

此处标准库并非只指代C++标准库，包括市面上的一些主流商业或开源库也算在在内，这样可以减少学习和共享成本，便于项目未来的长线发展。具体的外部库引入采用vcpkg实现，以便自动化并减少项目大小。

### 使用新式语法和函数[^4]

目前多种语言间的语法特性都呈现相互融合的趋势，新式功能符合主流发展方向，跟随当代开发者的开发习惯在发展。首先项目需要能跟上时代，另外更重要的是采用新功能编写代码往往更加简便，能大幅减少工作量。

### 使用模块代替头文件(暂时无法实现)[^5]

项目长期发展后，代码量将会非常庞大，此时采用头文件方式编译项目非常缓慢。目前C++20提供了模块功能代替头文件，大幅减少了编译时间，这可以加快项目开发速度，对大型项目非常实用。

[^1]: Unity中的包管理器 https://docs.unity.cn/cn/2019.4/Manual/Packages.html  
[^2]: 软件开发基本要求 https://www.cnblogs.com/BDFFZI/p/17171430.html  
[^3]: 设计模式 https://www.cnblogs.com/BDFFZI/p/17168797.html  
[^4]: 欢迎来到现代C++ https://learn.microsoft.com/zh-cn/cpp/cpp/welcome-back-to-cpp-modern-cpp  
[^5]: C++中的模块概述 https://learn.microsoft.com/zh-cn/cpp/cpp/modules-cpp
